renderTaiwanMap(function () { });
console.log(getPopulationData());


function getPopulationData() {
    let val = [];
    d3.json(Population.url)
        .then(function (jsonData) {
            let temp = {
                "臺北市": 271.79,
                "嘉義市": 60.02,
                "新竹市": 104.15,
                "基隆市": 132.75,
                "新北市": 2052.56,
                "桃園市": 1220.95,
                "臺中市": 2214.89,
                "彰化縣": 1074.39,
                "金門縣": 151.65,
                "高雄市": 2951.85,
                "澎湖縣": 126.86,
                "臺南市": 2191.65,
                "雲林縣": 1290.83,
                "連江縣": 28.80,
                "新竹縣": 1427.53,
                "苗栗縣": 1820.31,
                "屏東縣": 2775.60,
                "嘉義縣": 1903.63,
                "宜蘭縣": 2143.62,
                "南投縣": 4106.43,
                "花蓮縣": 4628.57,
                "臺東縣": 3515.25
            };

            for (let i = 2014; i <= 2020; i++) {
                for (let county in jsonData[i]) {
                    if (county == "總計") {
                        continue;
                    }
                    let sums = [0, 0, 0];
                    let total = jsonData[i][county]["grand-total"]["total"];
                    for (let j = 0; j < 3; j++) {
                        sums[0] += jsonData[i][county]["total"]["total"][j];
                    }
                    for (let j = 4; j < 13; j++) {
                        sums[1] += jsonData[i][county]["total"]["total"][j];
                    }
                    for (let j = 13; j < jsonData[i][county]["total"]["total"].length; j++) {
                        sums[2] += jsonData[i][county]["total"]["total"][j];
                    }
                    val.push({ year: i - 1911, county: county, value: total / temp[county] / 1000 });
                }
            }
            console.log(val);
        });

    return val;
}

/*
        { city: '基隆市', year: 103, totalObjects: 180 },
        { city: '基隆市', year: 104, totalObjects: 180 },
        { city: '基隆市', year: 105, totalObjects: 191 },
        { city: '基隆市', year: 106, totalObjects: 197 },
        { city: '基隆市', year: 107, totalObjects: 200 },
        { city: '基隆市', year: 108, totalObjects: 200 },
        { city: '基隆市', year: 109, totalObjects: 201 },
        
        { city: '臺北市', year: 103, totalObjects: 1271 },
        { city: '臺北市', year: 104, totalObjects: 1271 },
        { city: '臺北市', year: 105, totalObjects: 1294 },
        { city: '臺北市', year: 106, totalObjects: 1362 },
        { city: '臺北市', year: 107, totalObjects: 1394 },
        { city: '臺北市', year: 108, totalObjects: 1402 },
        { city: '臺北市', year: 109, totalObjects: 1409 },

        { city: '新北市', year: 103, totalObjects: 1357 },
        { city: '新北市', year: 104, totalObjects: 1396 },
        { city: '新北市', year: 105, totalObjects: 1478 },
        { city: '新北市', year: 106, totalObjects: 1532 },
        { city: '新北市', year: 107, totalObjects: 1567 },
        { city: '新北市', year: 108, totalObjects: 1593 },
        { city: '新北市', year: 109, totalObjects: 1604 },

        { city: '桃園市', year: 103, totalObjects: 939 },
        { city: '桃園市', year: 104, totalObjects: 955 },
        { city: '桃園市', year: 105, totalObjects: 995 },
        { city: '桃園市', year: 106, totalObjects: 1017 },
        { city: '桃園市', year: 107, totalObjects: 1066 },
        { city: '桃園市', year: 108, totalObjects: 1091 },
        { city: '桃園市', year: 109, totalObjects: 1098 },

        { city: '新竹市', year: 103, totalObjects: 296 },
        { city: '新竹市', year: 104, totalObjects: 300 },
        { city: '新竹市', year: 105, totalObjects: 306 },
        { city: '新竹市', year: 106, totalObjects: 308 },
        { city: '新竹市', year: 107, totalObjects: 320 },
        { city: '新竹市', year: 108, totalObjects: 323 },
        { city: '新竹市', year: 109, totalObjects: 324 },

        { city: '新竹縣', year: 103, totalObjects: 425 },
        { city: '新竹縣', year: 104, totalObjects: 428 },
        { city: '新竹縣', year: 105, totalObjects: 435 },
        { city: '新竹縣', year: 106, totalObjects: 443 },
        { city: '新竹縣', year: 107, totalObjects: 445 },
        { city: '新竹縣', year: 108, totalObjects: 453 },
        { city: '新竹縣', year: 109, totalObjects: 453 },
        
        { city: '苗栗縣', year: 103, totalObjects: 468 },
        { city: '苗栗縣', year: 104, totalObjects: 482 },
        { city: '苗栗縣', year: 105, totalObjects: 486 },
        { city: '苗栗縣', year: 106, totalObjects: 492 },
        { city: '苗栗縣', year: 107, totalObjects: 494 },
        { city: '苗栗縣', year: 108, totalObjects: 497 },
        { city: '苗栗縣', year: 109, totalObjects: 502 },
        
        { city: '臺中市', year: 103, totalObjects: 1204 },
        { city: '臺中市', year: 104, totalObjects: 1210 },
        { city: '臺中市', year: 105, totalObjects: 1236 },
        { city: '臺中市', year: 106, totalObjects: 1256 },
        { city: '臺中市', year: 107, totalObjects: 1276 },
        { city: '臺中市', year: 108, totalObjects: 1287 },
        { city: '臺中市', year: 109, totalObjects: 1294 },
        
        { city: '彰化縣', year: 103, totalObjects: 1028 },
        { city: '彰化縣', year: 104, totalObjects: 1046 },
        { city: '彰化縣', year: 105, totalObjects: 1051 },
        { city: '彰化縣', year: 106, totalObjects: 1056 },
        { city: '彰化縣', year: 107, totalObjects: 1071 },
        { city: '彰化縣', year: 108, totalObjects: 1073 },
        { city: '彰化縣', year: 109, totalObjects: 1078 },
                
        { city: '南投縣', year: 103, totalObjects: 501 },
        { city: '南投縣', year: 104, totalObjects: 517 },
        { city: '南投縣', year: 105, totalObjects: 528 },
        { city: '南投縣', year: 106, totalObjects: 532 },
        { city: '南投縣', year: 107, totalObjects: 532 },
        { city: '南投縣', year: 108, totalObjects: 536 },
        { city: '南投縣', year: 109, totalObjects: 537 },
                
        { city: '雲林縣', year: 103, totalObjects: 723 },
        { city: '雲林縣', year: 104, totalObjects: 727 },
        { city: '雲林縣', year: 105, totalObjects: 730 },
        { city: '雲林縣', year: 106, totalObjects: 736 },
        { city: '雲林縣', year: 107, totalObjects: 738 },
        { city: '雲林縣', year: 108, totalObjects: 742 },
        { city: '雲林縣', year: 109, totalObjects: 743 },
                
        { city: '嘉義市', year: 103, totalObjects: 169 },
        { city: '嘉義市', year: 104, totalObjects: 169 },
        { city: '嘉義市', year: 105, totalObjects: 175 },
        { city: '嘉義市', year: 106, totalObjects: 177 },
        { city: '嘉義市', year: 107, totalObjects: 179 },
        { city: '嘉義市', year: 108, totalObjects: 179 },
        { city: '嘉義市', year: 109, totalObjects: 181 },
                
        { city: '嘉義縣', year: 103, totalObjects: 442 },
        { city: '嘉義縣', year: 104, totalObjects: 446 },
        { city: '嘉義縣', year: 105, totalObjects: 450 },
        { city: '嘉義縣', year: 106, totalObjects: 453 },
        { city: '嘉義縣', year: 107, totalObjects: 456 },
        { city: '嘉義縣', year: 108, totalObjects: 463 },
        { city: '嘉義縣', year: 109, totalObjects: 467 },
                
        { city: '臺南市', year: 103, totalObjects: 1112 },
        { city: '臺南市', year: 104, totalObjects: 1131 },
        { city: '臺南市', year: 105, totalObjects: 1139 },
        { city: '臺南市', year: 106, totalObjects: 1156 },
        { city: '臺南市', year: 107, totalObjects: 1163 },
        { city: '臺南市', year: 108, totalObjects: 1184 },
        { city: '臺南市', year: 109, totalObjects: 1186 },
                        
        { city: '高雄市', year: 103, totalObjects: 1479 },
        { city: '高雄市', year: 104, totalObjects: 1501 },
        { city: '高雄市', year: 105, totalObjects: 1517 },
        { city: '高雄市', year: 106, totalObjects: 1547 },
        { city: '高雄市', year: 107, totalObjects: 1558 },
        { city: '高雄市', year: 108, totalObjects: 1568 },
        { city: '高雄市', year: 109, totalObjects: 1574 },
                        
        { city: '屏東縣', year: 103, totalObjects: 692 },
        { city: '屏東縣', year: 104, totalObjects: 698 },
        { city: '屏東縣', year: 105, totalObjects: 703 },
        { city: '屏東縣', year: 106, totalObjects: 708 },
        { city: '屏東縣', year: 107, totalObjects: 714 },
        { city: '屏東縣', year: 108, totalObjects: 716 },
        { city: '屏東縣', year: 109, totalObjects: 721 },
                        
        { city: '臺東縣', year: 103, totalObjects: 359 },
        { city: '臺東縣', year: 104, totalObjects: 360 },
        { city: '臺東縣', year: 105, totalObjects: 362 },
        { city: '臺東縣', year: 106, totalObjects: 366 },
        { city: '臺東縣', year: 107, totalObjects: 368 },
        { city: '臺東縣', year: 108, totalObjects: 368 },
        { city: '臺東縣', year: 109, totalObjects: 368 },
                        
        { city: '花蓮縣', year: 103, totalObjects: 437 },
        { city: '花蓮縣', year: 104, totalObjects: 446 },
        { city: '花蓮縣', year: 105, totalObjects: 454 },
        { city: '花蓮縣', year: 106, totalObjects: 464 },
        { city: '花蓮縣', year: 107, totalObjects: 469 },
        { city: '花蓮縣', year: 108, totalObjects: 473 },
        { city: '花蓮縣', year: 109, totalObjects: 473 },
                                
        { city: '宜蘭縣', year: 103, totalObjects: 383 },
        { city: '宜蘭縣', year: 104, totalObjects: 401 },
        { city: '宜蘭縣', year: 105, totalObjects: 422 },
        { city: '宜蘭縣', year: 106, totalObjects: 427 },
        { city: '宜蘭縣', year: 107, totalObjects: 435 },
        { city: '宜蘭縣', year: 108, totalObjects: 438 },
        { city: '宜蘭縣', year: 109, totalObjects: 442 },
                                
        { city: '澎湖縣', year: 103, totalObjects: 132 },
        { city: '澎湖縣', year: 104, totalObjects: 132 },
        { city: '澎湖縣', year: 105, totalObjects: 136 },
        { city: '澎湖縣', year: 106, totalObjects: 136 },
        { city: '澎湖縣', year: 107, totalObjects: 136 },
        { city: '澎湖縣', year: 108, totalObjects: 137 },
        { city: '澎湖縣', year: 109, totalObjects: 141 },
                                        
        { city: '金門縣', year: 103, totalObjects: 118 },
        { city: '金門縣', year: 104, totalObjects: 119 },
        { city: '金門縣', year: 105, totalObjects: 119 },
        { city: '金門縣', year: 106, totalObjects: 119 },
        { city: '金門縣', year: 107, totalObjects: 119 },
        { city: '金門縣', year: 108, totalObjects: 119 },
        { city: '金門縣', year: 109, totalObjects: 119 },
                                        
        { city: '連江縣(馬祖)', year: 103, totalObjects: 31 },
        { city: '連江縣(馬祖)', year: 104, totalObjects: 31 },
        { city: '連江縣(馬祖)', year: 105, totalObjects: 32 },
        { city: '連江縣(馬祖)', year: 106, totalObjects: 32 },
        { city: '連江縣(馬祖)', year: 107, totalObjects: 32 },
        { city: '連江縣(馬祖)', year: 108, totalObjects: 32 },
        { city: '連江縣(馬祖)', year: 109, totalObjects: 32 },
*/

/*
{year: 103, county: '新北市', value: 1.9326197528939473},
{year: 103, county: '臺北市', value: 9.942657934434674},
{year: 103, county: '臺中市', value: 1.2279774616346635},
{year: 103, county: '臺南市', value: 0.8597558916797845},
{year: 103, county: '高雄市', value: 0.9414407913681251},
{year: 103, county: '宜蘭縣', value: 0.21401974230507273},
{year: 103, county: '桃園縣', value: NaN},
{year: 103, county: '新竹縣', value: 0.37661555273794595},
{year: 103, county: '苗栗縣', value: 0.31155792145293937},
{year: 103, county: '彰化縣', value: 1.2020532581278678},
{year: 103, county: '南投縣', value: 0.12524626013349793},
{year: 103, county: '雲林縣', value: 0.5464360140374798},
{year: 103, county: '嘉義縣', value: 0.2756748948062386},
{year: 103, county: '屏東縣', value: 0.30548962386511025},
{year: 103, county: '臺東縣', value: 0.06385605575705852},
{year: 103, county: '花蓮縣', value: 0.07202915803369075},
{year: 103, county: '澎湖縣', value: 0.802128330443008},
{year: 103, county: '基隆市', value: 2.8103728813559323},
{year: 103, county: '新竹市', value: 4.14774843975036},
{year: 103, county: '嘉義市', value: 4.51321226257914},
{year: 103, county: '金門縣', value: 0.8422222222222222},
{year: 103, county: '連江縣', value: 0.4342361111111111},
{year: 104, county: '新北市', value: 1.9344837666133998},
{year: 104, county: '臺北市', value: 9.95183781596085},
{year: 104, county: '桃園市', value: 1.7247061714238912},
{year: 104, county: '臺中市', value: 1.2390886229112958},
{year: 104, county: '臺南市', value: 0.8603294321629822},
{year: 104, county: '高雄市', value: 0.941415722343615},
{year: 104, county: '宜蘭縣', value: 0.21371185191405195},
{year: 104, county: '新竹縣', value: 0.37970620582404574},
{year: 104, county: '苗栗縣', value: 0.3097889919848817},
{year: 104, county: '彰化縣', value: 1.199817570900697},
{year: 104, county: '南投縣', value: 0.12407127358800708},
{year: 104, county: '雲林縣', value: 0.5420024325434024},
{year: 104, county: '嘉義縣', value: 0.2730777514538014},
{year: 104, county: '屏東縣', value: 0.30308870154200895},
{year: 104, county: '臺東縣', value: 0.06328198563402318},
{year: 104, county: '花蓮縣', value: 0.07171653448041188},
{year: 104, county: '澎湖縣', value: 0.806432287561091},
{year: 104, county: '基隆市', value: 2.8030508474576274},
{year: 104, county: '新竹市', value: 4.167642822851656},
{year: 104, county: '嘉義市', value: 4.5045984671776065},
{year: 104, county: '金門縣', value: 0.875694032311243},
{year: 104, county: '連江縣', value: 0.4356597222222222},
{year: 105, county: '新北市', value: 1.9386561172389603},
{year: 105, county: '臺北市', value: 9.918334007873726},
{year: 105, county: '桃園市', value: 1.759091690896433},
{year: 105, county: '臺中市', value: 1.249379878910465},
{year: 105, county: '臺南市', value: 0.8605539205621335},
{year: 105, county: '高雄市', value: 0.9415691854260888},
{year: 105, county: '宜蘭縣', value: 0.21344174807102007},
{year: 105, county: '新竹縣', value: 0.3835162833705772},
{year: 105, county: '苗栗縣', value: 0.30719437897940466},
{year: 105, county: '彰化縣', value: 1.1980249257718334},
{year: 105, county: '南投縣', value: 0.12301756026524255},
{year: 105, county: '雲林縣', value: 0.5383148826723891},
{year: 105, county: '嘉義縣', value: 0.27070386577223515},
{year: 105, county: '屏東縣', value: 0.3011211990200317},
{year: 105, county: '臺東縣', value: 0.06281260223312708},
{year: 105, county: '花蓮縣', value: 0.07149313934973438},
{year: 105, county: '澎湖縣', value: 0.8139918019864417},
{year: 105, county: '基隆市', value: 2.8030131826741993},
{year: 105, county: '新竹市', value: 4.19910705712914},
{year: 105, county: '嘉義市', value: 4.4964011996001325},
{year: 105, county: '金門縣', value: 0.8909594460929773},
{year: 105, county: '連江縣', value: 0.43732638888888886},
{year: 106, county: '新北市', value: 1.942300834080368},
{year: 106, county: '臺北市', value: 9.872537620957356},
{year: 106, county: '桃園市', value: 1.7920610999631432},
{year: 106, county: '臺中市', value: 1.2583333709574742},
{year: 106, county: '臺南市', value: 0.8607770401295827},
{year: 106, county: '高雄市', value: 0.9407361485170317},
{year: 106, county: '宜蘭縣', value: 0.21300743601944375},
{year: 106, county: '新竹縣', value: 0.3868002774022262},
{year: 106, county: '苗栗縣', value: 0.3042377397256511},
{year: 106, county: '彰化縣', value: 1.1936615195599363},
{year: 106, county: '南投縣', value: 0.12201620385590402},
{year: 106, county: '雲林縣', value: 0.5348287535926497},
{year: 106, county: '嘉義縣', value: 0.2685301240262025},
{year: 106, county: '屏東縣', value: 0.2990124657731662},
{year: 106, county: '臺東縣', value: 0.06245359505013868},
{year: 106, county: '花蓮縣', value: 0.07113147257144216},
{year: 106, county: '澎湖縣', value: 0.8203767933154659},
{year: 106, county: '基隆市', value: 2.798177024482109},
{year: 106, county: '新竹市', value: 4.235544887181949},
{year: 106, county: '嘉義市', value: 4.488470509830057},
{year: 106, county: '金門縣', value: 0.9064029014177383},
{year: 106, county: '連江縣', value: 0.44722222222222224},
{year: 107, county: '新北市', value: 1.9466992438710684},
{year: 107, county: '臺北市', value: 9.818506935501674},
{year: 107, county: '桃園市', value: 1.8189704738113763},
{year: 107, county: '臺中市', value: 1.2659292335059529},
{year: 107, county: '臺南市', value: 0.8595491980927611},
{year: 107, county: '高雄市', value: 0.9395914426546065},
{year: 107, county: '宜蘭縣', value: 0.21236086619830008},
{year: 107, county: '新竹縣', value: 0.3901914495667341},
{year: 107, county: '苗栗縣', value: 0.30152171882811174},
{year: 107, county: '彰化縣', value: 1.1893483744264186},
{year: 107, county: '南投縣', value: 0.12103725133510129},
{year: 107, county: '雲林縣', value: 0.5314580541202173},
{year: 107, county: '嘉義縣', value: 0.2663689897721721},
{year: 107, county: '屏東縣', value: 0.29737930537541435},
{year: 107, county: '臺東縣', value: 0.062276936206528695},
{year: 107, county: '花蓮縣', value: 0.07085730582015613},
{year: 107, county: '澎湖縣', value: 0.8232697461768879},
{year: 107, county: '基隆市', value: 2.788361581920904},
{year: 107, county: '新竹市', value: 4.278780604896784},
{year: 107, county: '嘉義市', value: 4.475541486171276},
{year: 107, county: '金門縣', value: 0.9183844378503131},
{year: 107, county: '連江縣', value: 0.4533333333333333},
{year: 108, county: '新北市', value: 1.9578945317067467},
{year: 108, county: '臺北市', value: 9.731929062879427},
{year: 108, county: '桃園市', value: 1.8420385765182847},
{year: 108, county: '臺中市', value: 1.2710613168148306},
{year: 108, county: '臺南市', value: 0.8582145871831726},
{year: 108, county: '高雄市', value: 0.9394779545031082},
{year: 108, county: '宜蘭縣', value: 0.21187430608036875},
{year: 108, county: '新竹縣', value: 0.39504108495092927},
{year: 108, county: '苗栗縣', value: 0.29965170767616506},
{year: 108, county: '彰化縣', value: 1.184674094137138},
{year: 108, county: '南投縣', value: 0.12032641491514526},
{year: 108, county: '雲林縣', value: 0.5278045908446504},
{year: 108, county: '嘉義縣', value: 0.2642913801526557},
{year: 108, county: '屏東縣', value: 0.2951376279002738},
{year: 108, county: '臺東縣', value: 0.06166872910888272},
{year: 108, county: '花蓮縣', value: 0.0704854847177422},
{year: 108, county: '澎湖縣', value: 0.8293157811760997},
{year: 108, county: '基隆市', value: 2.778854990583804},
{year: 108, county: '新竹市', value: 4.309198271723476},
{year: 108, county: '嘉義市', value: 4.46001332889037},
{year: 108, county: '金門縣', value: 0.9243982855258819},
{year: 108, county: '連江縣', value: 0.45447916666666666},
{year: 109, county: '新北市', value: 1.9633628249600499},
{year: 109, county: '臺北市', value: 9.596865226829538},
{year: 109, county: '桃園市', value: 1.855882714279864},
{year: 109, county: '臺中市', value: 1.272093422246703},
{year: 109, county: '臺南市', value: 0.8559345698446377},
{year: 109, county: '高雄市', value: 0.9375080034554601},
{year: 109, county: '宜蘭縣', value: 0.2114689170655247},
{year: 109, county: '新竹縣', value: 0.39898636105721075},
{year: 109, county: '苗栗縣', value: 0.2984585043206926},
{year: 109, county: '彰化縣', value: 1.1800053984121222},
{year: 109, county: '南投縣', value: 0.11970154124141894},
{year: 109, county: '雲林縣', value: 0.5249870238528699},
{year: 109, county: '嘉義縣', value: 0.2627175449010575},
{year: 109, county: '屏東縣', value: 0.29315319210260843},
{year: 109, county: '臺東縣', value: 0.0612952137116848},
{year: 109, county: '花蓮縣', value: 0.07013008337348252},
{year: 109, county: '澎湖縣', value: 0.834873088443954},
{year: 109, county: '基隆市', value: 2.771299435028249},
{year: 109, county: '新竹市', value: 4.3283053288526165},
{year: 109, county: '嘉義市', value: 4.436037987337554},
{year: 109, county: '金門縣', value: 0.9259479063633367},
{year: 109, county: '連江縣', value: 0.4565625},
*/